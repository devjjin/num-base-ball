<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>숫자야구게임</title>
  </head>
  <body>
    <script>
      const playBaseball = () => {
        const answerArr = [];

        while (answerArr.length < 3) {
          const num = Math.floor(Math.random() * 10);
          if (!answerArr.includes(num)) {
            answerArr.push(num);
          }
        }

        alert('컴퓨터가 숫자를 생성하였습니다. 답을 맞춰보세요!');

        let round = 1;
        let input;

        while (true) {
          input = prompt(round === 1 ? `${round} 번째 시도` : `${round} 번째 시도 이전값 ${input}`);

          if (!input) {
            break;
          }

          if (input.length !== 3 || isNaN(input)) {
            alert('숫자 3자리만 입력 가능합니다. 다시 입력해주세요.');
            continue;
          }

          if (new Set(input).size !== 3) {
            alert('중복된 숫자는 입력 불가합니다. 다시 입력해주세요.');
            continue;
          }

          let strikeCnt = 0;
          let ballCnt = 0;

          for (let j = 0; j < answerArr.length; j++) {
            const idx = input.indexOf(answerArr[j]);
            if (input.includes(answerArr[j])) {
              if (idx === j) {
                strikeCnt++;
              } else {
                ballCnt++;
              }
            }
          }

          if (strikeCnt === 3) {
            alert(`${round}번만에 성공하셨습니다.`);
            break;
          } else {
            alert(`${strikeCnt}S${ballCnt}B`);
          }
          round++;
        }
      };

      playBaseball();
    </script>
  </body>
</html>